(this.webpackJsonp3js=this.webpackJsonp3js||[]).push([[0],{64:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAQACAMAAADvODj6AAAAclBMVEUBGTYGFSUREREREREPDw9GU2J7k4jC6r0bNkllHUDtJU5eTF8AGDYOEhYJEyDMI0qNP1ghGjqpzKSlN1bgyFz53FyQiEztJE73wVouNj6nzana5JL521uOGzNzZy/J6K6x1bBTcm/x3mnOIUXyclNfZWCunBQsAAAAJnRSTlP/x//Hx//H/8fH/8fHx8fHx8fHx8f/x8fHx8fHx8fHx8fHx8fHx8zM38sAAADzSURBVHja7dlJcsIwFEVRESAEQgIJXSAd7f63yOwugHJdCumd0ZupLEv/y3Ipqh7KE4zYhzywGwdoZX6HMOIzyghGfEGp2RhlAiO+Ql5Rqb+pv488v64p5IHfkPWb+nBzfIe8fmeQG6vbTeeQH/MD8otNfUj97SB+Qv6wcbfpAnJhWqKsUF9co5X+5sYN5IG/IK8od5tukf6W80MXsZH6u4N8fnDjN+QX+wN5YLfN/CL1N/X38f4P5f4h6zf1IfOb+b1P/IN8TPqHfCJt5P/83fpbI/eTe1S9fg+QH/MIuTClv+X80EE8oer79TPkbXqBW/ivadTkA7ni7+8AAAAASUVORK5CYII="},70:function(e,n,t){e.exports=t(81)},80:function(e,n,t){},81:function(e,n,t){"use strict";t.r(n);var o=t(1),r=t.n(o),a=t(38),i=t.n(a),c=t(7),l=t(21),s=t(17),u=t(15),f=t(0),v=t(57),g=t(58),m={extensions:{derivatives:!0},side:f.DoubleSide,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},inside:{type:"f",value:0},surfaceColor:{type:"v3",value:new f.Color("green")},insideColor:{type:"v3",value:new f.Color("blue")},tCube:{value:f.CubeTexture},pixels:{type:"v2",value:new f.Vector2(window.innerWidth,window.innerHeight)},uvRate1:{value:new f.Vector2(1,1)}},vertexShader:"uniform float time;\n        uniform float progress;\n        uniform float inside;\n\n\n\n        attribute vec3 centroid;\n        attribute vec3 axis;\n        attribute float offset;\n\n        varying vec3 eye;\n        varying vec3 vNormal;\n        varying vec3 vReflect;\n\n        mat4 rotationMatrix(vec3 axis, float angle) {\n        axis = normalize(axis);\n        float s = sin(angle);\n        float c = cos(angle);\n        float oc = 1.0 - c;\n\n        return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n            oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n            oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n            0.0,                                0.0,                                0.0,                                1.0);\n    }\n\n    vec3 rotate(vec3 v, vec3 axis, float angle) {\n        mat4 m = rotationMatrix(axis, angle);\n        return (m * vec4(v, 1.0)).xyz;\n    }\n\n    vec3 bezier4(vec3 a, vec3 b, vec3 c, vec3 d, float t) {\n        return mix(mix(mix(a, b, t), mix(b, c, t), t), mix(mix(b, c, t), mix(c, d, t), t), t);\n    }\n\n    float easeInOutQuint(float t){\n        return t < 0.5 ? 16.0 * t * t * t * t * t : 1.0 + 16.0 * (--t) * t * t * t * t;\n    }\n    float easeOutQuint(float t){\n        return 1. + (--t) * t * t * t * t;\n    }\n    float easeOut(float t){\n        return  t * t * t;\n    }\n\n    void main() {\n\n        vec3 newposition = position;\n\n        float vTemp =  1. - ((centroid.x + centroid.y)*0.5 + 1.)/2.;\n\n        float tProgress = max(0.0, (progress - vTemp*0.4) /0.6);\n        vec3 newnormal = rotate(normal,axis,tProgress*(3. + offset*10.));\n        vNormal = newnormal;\n\n        newposition += newposition + centroid*(tProgress)*(3. + offset*7.);\n\n        eye = normalize( vec3( modelViewMatrix * vec4( newposition, 1.0 ) ) );\n        vec4 worldPosition = modelMatrix * vec4( newposition, 1.0 );\n        vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * newnormal );\n        vec3 I = worldPosition.xyz - cameraPosition;\n        vReflect = reflect( I, worldNormal );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( newposition, 1.0 );\n                }",fragmentShader:"uniform float time;\n        uniform float progress;\n        uniform float inside;\n        uniform vec3 surfaceColor;\n        uniform vec3 insideColor;\n        uniform samplerCube tCube;\n        \n        varying vec2 vUv;\n        varying vec2 vUv1;\n        varying vec3 eye;\n        varying vec3 vNormal;\n        varying vec3 vReflect;\n        \n        \n        void main()\t{\n        \n            vec3 r = reflect( eye, vNormal );\n            float m = 2. * sqrt( pow( r.x, 2. ) + pow( r.y, 2. ) + pow( r.z + 1., 2. ) );\n            vec2 vN = r.xy / m + .5;\n            vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n        \n            vec3 light = normalize(vec3(12.,10.,10.));\n            vec3 light1 = normalize(vec3(-12.,-10.,-10.));\n            float l = clamp(dot(light, vNormal),0.5,1.);\n            l += clamp(dot(light1, vNormal),0.5,1.)/2.;\n            // l /= 2.;\n            \n            if(inside>0.5){\n                gl_FragColor = vec4(l,l,l,1.)*vec4(surfaceColor,1.);\n            } else{\n                gl_FragColor = reflectedColor*vec4(insideColor,1.);\n            }\n\n        }"},d=t(48),p=t(59),x=Object(p.a)((function(e){return{mouseCoords:[0,0],scrolled:0,exploded:!1,explosionPosition:void 0,scenes:{currentScene:"",previousScene:""},cameraPosition:[0,10,4],mouseMove:function(n){var t=Object(c.a)(n,2),o=t[0],r=t[1];return e({mouseCoords:[o,r]})},scroll:function(n){return e({scrolled:n})},setExploded:function(n){return e({exploded:n})},setCurrentScene:function(n){return e({scenes:n})},setCameraPosition:function(n){return e({cameraPosition:n})},setExplosionPosition:function(n){return e({explosionPosition:n})}}})),y=Object(c.a)(x,2),h=y[0],b=y[1],z=b.subscribe,w=b.getState,P=t(23),E=function(e){return 0===e?1:e/Math.abs(e)},O=function(){var e=function(){var e="img/newsky/";return[e+"px.jpg",e+"nx.jpg",e+"py.jpg",e+"ny.jpg",e+"pz.jpg",e+"nz.jpg"]}(),n=Object(o.useMemo)((function(){return(new f.CubeTextureLoader).load(e)}),[e]);n.minFilter=f.LinearFilter;var t=Object(o.useMemo)((function(){var e=m;return e.uniforms.inside.value=1,e}),[]),a=Object(o.useState)({innerMesh:null,outerMesh:null}),i=Object(c.a)(a,2),l=i[0],s=l.innerMesh,p=l.outerMesh,x=i[1];Object(o.useEffect)((function(){var e=new g.a,n=new v.a;n.setDecoderPath("/draco-gltf/"),e.setDRACOLoader(n),e.load("withoutAll.glb",(function(e){var n=[];e.scene.traverse((function(e){"Voronoi_Fracture"===e.name&&(e.children[0].children.length>2?e.children.forEach((function(e){e.children.forEach((function(e){n.push(e.clone())}))})):e.children.forEach((function(e){n.push(e.clone())})))}));var t=[],o=[],r=0;n=n.filter((function(e){if(e instanceof f.Mesh)return!1;var n=function(e,n){var t=e.position,o=e.children[0].geometry.clone().applyMatrix4((new f.Matrix4).makeTranslation(t.x,t.y,t.z)),r=e.children[1].geometry.clone().applyMatrix4((new f.Matrix4).makeTranslation(t.x,t.y,t.z)),a=e.children[0].geometry.attributes.position.array.length/3,i=e.children[1].geometry.attributes.position.array.length/3,c=new Array(a).fill(n/100);o.setAttribute("offset",new f.BufferAttribute(new Float32Array(c),1));var l=new Array(i).fill(n/100);r.setAttribute("offset",new f.BufferAttribute(new Float32Array(l),1));for(var s=new f.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),u=new Array(3*a).fill(0),v=new Array(3*i).fill(0),g=0;g<3*a;g+=3)u[g]=s.x,u[g+1]=s.y,u[g+2]=s.z;o.setAttribute("axis",new f.BufferAttribute(new Float32Array(u),3));for(var m=0;m<3*i;m+=3)v[m]=s.x,v[m+1]=s.y,v[m+2]=s.z;r.setAttribute("axis",new f.BufferAttribute(new Float32Array(v),3));for(var d=function(e){for(var n=e.attributes.position.array,t=n.length,o=0,r=0,a=0,i=0;i<t;i+=3)o+=n[i],r+=n[i+1],a+=n[i+2];return{x:3*o/t,y:3*r/t,z:3*a/t}}(o),p=new Array(3*a).fill(0),x=new Array(3*i).fill(0),y=0;y<3*a;y+=3)p[y]=d.x,p[y+1]=d.y,p[y+2]=d.z;for(var h=0;h<3*i;h+=3)x[h]=d.x,x[h+1]=d.y,x[h+2]=d.z;return o.setAttribute("centroid",new f.BufferAttribute(new Float32Array(p),3)),r.setAttribute("centroid",new f.BufferAttribute(new Float32Array(x),3)),{surface:o,volume:r}}(e,++r);return o.push(n.surface),t.push(n.volume),!0}));var a=d.a.mergeBufferGeometries(t,!1);a.computeBoundingSphere();var i=d.a.mergeBufferGeometries(o,!1);i.computeBoundingSphere(),x({innerMesh:a,outerMesh:i})}))}),[]);var y=Object(o.useRef)(w().mouseCoords),b=Object(o.useRef)(0),O=Object(o.useRef)(0);Object(o.useEffect)((function(){return z((function(e){return y.current=e}),(function(e){return e.mouseCoords}))}),[]);var j=h((function(e){return e.exploded})),M=Object(P.useSpring)({progress:j?1:0}).progress,C=Object(o.useRef)(new f.Group);return Object(u.e)((function(){var e=2*(y.current[0]-window.innerWidth/2)/window.innerWidth,n=2*(y.current[1]-window.innerHeight/2)/window.innerHeight;b.current+=.05*(e-b.current),O.current+=.05*(n-O.current);var t=Math.abs(b.current),o=Math.abs(O.current);C.current.rotation.x=Math.PI/2-o*(2-o)*Math.PI*E(O.current),C.current.rotation.y=Math.PI/2-t*(2-t)*Math.PI*E(b.current),C.current.rotation.z=Math.PI/2-t*(2-t)*Math.PI*E(b.current)})),r.a.createElement("group",{ref:C,position:[0,0,0]},r.a.createElement("mesh",null,r.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},s)),r.a.createElement(P.animated.shaderMaterial,{"uniforms-progress-value":M,attach:"material",args:[m],"uniforms-tCube-value":n})),r.a.createElement("mesh",null,r.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},p)),r.a.createElement(P.animated.shaderMaterial,{"uniforms-progress-value":M,attach:"material",args:[t],"uniforms-tCube-value":n})))},j=function(e){var n=e.count,t=void 0===n?1e3:n,a=e.xOff,i=void 0===a?0:a,l=e.yOff,s=void 0===l?0:l,f=e.zOff,v=void 0===f?50:f,g=Object(o.useState)(.2),m=Object(c.a)(g,2),d=m[0],p=m[1];Object(u.e)((function(){var e;d<1&&p(d*(1-(e=.05))+1.05*e)}));var x=Object(o.useMemo)((function(){for(var e=[],n=0;n<t;n++)e.push((i+1e3*Math.random())*(Math.round(Math.random())?-1:1)),e.push((s+1e3*Math.random())*(Math.round(Math.random())?-1:1)),e.push((v+1e3*Math.random())*(Math.round(Math.random())?-1:1));return new Float32Array(e)}),[t,i,s,v]);return r.a.createElement("points",null,r.a.createElement("bufferGeometry",{attach:"geometry"},r.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:t,array:x,itemSize:3})),r.a.createElement("pointsMaterial",{attach:"material",size:1.5,sizeAttenuation:!0,color:"white",transparent:!0,opacity:d,fog:!1}))},M=t(19),C=function(){var e=h((function(e){return e.cameraPosition})),n=h((function(e){return e.explosionPosition})),t=h((function(e){return e.scenes})),a=Object(o.useRef)(),i=Object(u.g)(),c=i.setDefaultCamera,l=i.camera;Object(o.useEffect)((function(){c(a.current)}),[]);var s=Object(o.useRef)(""),f=Object(o.useRef)(0),v=Object(P.useSpring)({position:e,config:{mass:.6,tension:100,friction:80},onRest:function(){"explosion"===t.currentScene&&"landscape"===t.previousScene&&(s.current="radial")}}).position;return Object(u.e)((function(){n&&("radial"===s.current&&(f.current+=.001,l.position.x=n[0]+10*Math.sin(f.current),l.position.z=n[2]+30*Math.cos(f.current)),l.lookAt.apply(l,Object(M.a)(n)))})),r.a.createElement(P.animated.perspectiveCamera,{ref:a,position:v})},A={time:{type:"f",value:0},distortCenter:{type:"f",value:.1},roadWidth:{type:"f",value:.5},palette:{type:"t",value:null},speed:{type:"f",value:1.5},maxHeight:{type:"f",value:10},color:new f.Color(1,1,1),scroll:{type:"f",value:0}},S={uniforms:f.UniformsUtils.merge([f.ShaderLib.basic.uniforms,A]),vertexShader:"vec3 mod289(vec3 x)\n    {\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 mod289(vec4 x)\n    {\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec4 permute(vec4 x)\n    {\n        return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    vec4 taylorInvSqrt(vec4 r)\n    {\n        return 1.79284291400159 - 0.85373472095314 * r;\n    }\n    \n    vec3 fade(vec3 t) {\n        return t*t*t*(t*(t*6.0-15.0)+10.0);\n    }\n    \n    float cnoise(vec3 P)\n    {\n        vec3 Pi0 = floor(P); // Integer part for indexing\n        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n        Pi0 = mod289(Pi0);\n        Pi1 = mod289(Pi1);\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n    \n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n    \n        vec4 gx0 = ixy0 * (1.0 / 7.0);\n        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    \n        vec4 gx1 = ixy1 * (1.0 / 7.0);\n        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    \n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n    \n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n    \n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n    \n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n    }\n    \n    float pnoise(vec3 P, vec3 rep)\n    {\n        vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n        vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n        Pi0 = mod289(Pi0);\n        Pi1 = mod289(Pi1);\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n    \n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n    \n        vec4 gx0 = ixy0 * (1.0 / 7.0);\n        vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    \n        vec4 gx1 = ixy1 * (1.0 / 7.0);\n        vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    \n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n    \n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n    \n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n    \n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n    }\n\n    #define PI 3.1415926535897932384626433832795\n    \n    uniform float time;\n    uniform float maxHeight;\n    uniform float speed;\n    uniform float distortCenter;\n    uniform float roadWidth;\n    varying float vDisplace;\n    \n    varying float fogDepth;\n    \n    void main(){\n\n        float t = time * speed;\n        float wRoad = distortCenter;\n        float wRoad2 = wRoad * 0.5;\n    \n        float angleCenter = uv.y * PI*4.0;\n        angleCenter += t * 0.9;\n    \n        float centerOff = (\n            sin(angleCenter) +\n            sin(angleCenter*0.5)\n        ) * wRoad;\n    \n    \n        vec3 noiseIn = vec3(uv, 1.0)*10.0;\n        float noise = cnoise(vec3(noiseIn.x, noiseIn.y + t, noiseIn.z));\n        noise += 1.0;\n        float h = noise;\n        float angle = (uv.x - centerOff) * PI;\n        float f = abs(cos(angle));\n        h *= pow(f, 1.5 + roadWidth);\n    \n    \n        vDisplace = h;\n    \n    \n        h*=maxHeight;\n    \n        vec3 transformed = vec3( position.x, position.y, position.z + h );\n    \n    \n        vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n        gl_Position = projectionMatrix * mvPosition;\n    \n        fogDepth = -mvPosition.z;\n    \n    }",fragmentShader:"uniform float time;\n    uniform vec3 color;\n    uniform sampler2D palette;\n    varying float vDisplace;\n    \n    uniform vec3 fogColor;\n    uniform float fogNear;\n    uniform float fogFar;\n    varying float fogDepth;\n    \n    void main(){\n    \n        vec2 stripPos = vec2( 0.0, vDisplace );\n        vec4 stripColor = texture2D( palette, stripPos );\n        stripColor *= pow(1.0-vDisplace, 1.0);\n    \n        gl_FragColor = stripColor;\n    \n        #ifdef USE_FOG\n        float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n        gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n        #endif\n    }"},R=t(64),I=t.n(R),_=function(){var e=Object(u.f)(f.TextureLoader,I.a),n=Object(o.useRef)(w().mouseCoords),t=Object(o.useRef)(0),a=Object(o.useRef)(0);Object(o.useEffect)((function(){return z((function(e){return n.current=e}),(function(e){return e.mouseCoords}))}),[]);var i=Object(o.useCallback)((function(e,n,t,o,r){return o+(e-n)/(t-n)*(r-o)}),[]),c=Object(o.useCallback)((function(e,n,t){return(1-t)*e+t*n}),[]),l=Object(o.useRef)(new f.ShaderMaterial);return Object(u.e)((function(){var e=.001*performance.now();t.current=c(t.current,n.current[1],.1),a.current=c(a.current,n.current[0],.1),l.current.uniforms.distortCenter.value=.1*Math.sin(e),l.current.uniforms.maxHeight.value=i(t.current,0,window.innerHeight,20,5),l.current.uniforms.time.value=e,l.current.uniforms.roadWidth.value=i(a.current,0,window.innerWidth,1,4.5)})),r.a.createElement("mesh",{"position-z":-180,"rotation-x":-Math.PI/2},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[100,400,400,400]}),r.a.createElement("shaderMaterial",{attach:"material",ref:l,args:[S],wireframe:!1,"uniforms-palette-value":e,fog:!0}))},B={uniforms:{luminance:{value:1},turbidity:{value:13},rayleigh:{value:1.2},mieCoefficient:{value:.1},mieDirectionalG:{value:.58},sunPosition:{value:new f.Vector3},opacity:{value:1}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","uniform float opacity;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, opacity );","}"].join("\n")},F=function(e){var n=e.changeRenderedScene,t=Object(o.useRef)(w().scrolled),a=h((function(e){return e.scenes})),i=h((function(e){return e.setCameraPosition})),l=h((function(e){return e.setExplosionPosition}));Object(o.useEffect)((function(){return z((function(e){return t.current=e}),(function(e){return e.scrolled}))}));var s=Object(o.useRef)(new f.ShaderMaterial),v=Object(P.useSpring)((function(){return{opacity:1}})),g=Object(c.a)(v,2),m=g[0].opacity,d=g[1];Object(o.useEffect)((function(){if("explosion"===a.currentScene&&"landscape"===a.previousScene){var e=s.current.uniforms.sunPosition.value,t=[e[0],e[1]+10,e[2]+30];console.log(e,t),l(e),i(t),d({opacity:0,onRest:function(){return n("explosion")}}),n("landscape & explosion")}}),[a]);var p=Object(o.useCallback)((function(){var e=Math.PI*(-.002-.048*t.current),n=2*Math.PI*-.25,o=[225e3*Math.cos(n),2500+2e5*t.current,225e3*Math.sin(n)*Math.cos(e)];s.current.uniforms.turbidity.value=13-12*t.current,s.current.uniforms.rayleigh.value=1.2-1.19*t.current,s.current.uniforms.mieCoefficient.value=.1-.09997*t.current,s.current.uniforms.mieDirectionalG.value=.58-.1*t.current,s.current.uniforms.sunPosition.value=o}),[]);return Object(o.useEffect)((function(){p()}),[]),Object(u.e)((function(){p()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("mesh",null,r.a.createElement("boxBufferGeometry",{attach:"geometry",args:[45e4,45e4,45e4]}),r.a.createElement(P.animated.shaderMaterial,{ref:s,attach:"material",args:[B],side:f.BackSide,"uniforms-opacity-value":m})))},D=t(27),N=function(){var e=Object(o.useRef)(new f.Mesh),n=Object(u.g)(),t=n.gl,a=n.scene,i=n.camera,c=n.size,l=Object(o.useMemo)((function(){var e=new D.a(t);return e.addPass(new D.e(a,i)),console.log("render"),e}),[i,t,a]);return Object(o.useLayoutEffect)((function(){var n=new D.c(i,e.current,{height:480,kernelSize:D.d.SMALL,density:.96,decay:.92,weight:.3,exposure:.54,samples:60}),t=new Image;t.src=D.f.areaImageDataURL;var o=new Image;o.src=D.f.searchImageDataURL;var r=new D.f(o,t,1),a=new D.b(i,r,n);a.renderToScreen=!0,l.addPass(a)}),[i,t,a]),Object(o.useEffect)((function(){l.setSize(c.width,c.height)}),[l,c]),Object(u.e)((function(e,n){return l.render(n)}),1),r.a.createElement("group",{position:[0,0,-40]},r.a.createElement("pointLight",{args:[16764074,3,20]}),r.a.createElement("mesh",{ref:e},r.a.createElement("meshBasicMaterial",{attach:"material",color:16764074,transparent:!0}),r.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[5,32,32]})))},T=function(){h((function(e){return e.scenes}));var e=h((function(e){return e.explosionPosition})),n=Object(u.g)(),t=(n.scene,n.gl);Object(o.useLayoutEffect)((function(){console.log(t)}),[]);var a=Object(o.useState)("landscape"),i=Object(c.a)(a,2),l=i[0],s=i[1],f=Object(o.useCallback)((function(e){s(e)}),[]);return console.log(e),r.a.createElement(o.Suspense,{fallback:null},r.a.createElement("group",{visible:"landscape"===l||"landscape & explosion"===l},r.a.createElement(_,null),r.a.createElement(F,{changeRenderedScene:f})),r.a.createElement("group",{position:e||void 0,visible:"explosion"===l||"landscape & explosion"===l},r.a.createElement(j,null),r.a.createElement(O,null),r.a.createElement(N,null)),r.a.createElement(C,null))},k=function(){return r.a.createElement(u.a,{style:{background:"black"},shadowMap:!0,onCreated:function(e){e.scene.background=new f.Color(3355443)},concurrent:!0},r.a.createElement("fog",{attach:"fog",args:[3355443,10,400]}),r.a.createElement(T,null))},H=t(20),L=t.n(H),G=t(24),W=t(31);function U(){var e=Object(l.a)(["\n  position: absolute;\n  z-index: 999;\n  top: 20px;\n  right: 20px;\n  color: white;\n  font-size: 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return U=function(){return e},e}function V(){var e=Object(l.a)(["\n  position: relative;\n  font-weight: 300;\n  font-size: 50px;\n  margin-bottom: 10px;\n  will-change: top, opacity;\n"]);return V=function(){return e},e}function J(){var e=Object(l.a)(["\n  position: absolute;\n  top: 50%;\n  left: 70px;\n  transform: translateY(-50%);\n"]);return J=function(){return e},e}function q(){var e=Object(l.a)(["\n  position: absolute;\n  bottom: 0;\n  background-color: blanchedalmond;\n  width: 1px;\n  will-change: height;\n"]);return q=function(){return e},e}function Q(){var e=Object(l.a)(["\n  position: absolute;\n  background-color: rgb(20, 20, 20);\n  height: 100%;\n  will-change: width;\n"]);return Q=function(){return e},e}function X(){var e=Object(l.a)(["\n  position: absolute;\n  top: 0;\n  color: white;\n  min-height: 100%;\n  min-width: 100%;\n  font-family: 'Poppins', sans-serif;\n  box-sizing: border-box;\n  z-index: 997;\n"]);return X=function(){return e},e}var Y=s.b.div(X()),Z=Object(s.b)(W.animated.div)(Q()),K=Object(s.b)(W.animated.div)(q()),$=s.b.div(J()),ee=Object(s.b)(W.animated.div)(V()),ne=s.b.div(U()),te=["","","","",""],oe=["","","",""],re=["Home","Portfolio","About","Contacts"],ae=function(e){var n=Object(o.useState)({innWidth:window.innerWidth,innHeight:window.innerHeight}),t=Object(c.a)(n,2),a=t[0],i=a.innWidth,l=a.innHeight,s=t[1],u=function(){s({innWidth:window.innerWidth,innHeight:window.innerHeight})};Object(o.useEffect)((function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}));var f=Object(o.useState)(!0),v=Object(c.a)(f,2),g=v[0],m=v[1],d={tension:200},p=Object(o.useRef)(),x=Object(W.useSprings)(te.length,te.map((function(n,t){return{ref:p,from:{width:"0px",left:"".concat(t*(i/5),"px")},to:function(){var n=Object(G.a)(L.a.mark((function n(o){return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o({left:"".concat(t*(i/5),"px"),width:g?"".concat(i/5+3,"px"):"0px"});case 2:return n.next=4,void(g||e.switchNavMenu());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),config:d}}))),y=Object(o.useRef)(),h=Object(W.useSprings)(oe.length,oe.map((function(e,n){return{ref:y,from:{height:"0px",left:"".concat((n+1)*(i/5),"px")},left:"".concat((n+1)*(i/5),"px"),height:g?"".concat(l,"px"):"0px",config:d}}))),b=Object(o.useRef)(),z=Object(W.useTrail)(re.length,{ref:b,from:{opacity:0,top:"-50px"},opacity:g?1:0,top:g?"0":"-50px",config:d});return Object(W.useChain)(g?[p,y,b]:[b,y,p],g?[0,.5,.7]:[0,.2,.8]),r.a.createElement(Y,null,x.map((function(e,n){return r.a.createElement(Z,{key:n,style:e})})),h.map((function(e,n){return r.a.createElement(K,{key:n,style:e})})),r.a.createElement($,null,z.map((function(e,n){return r.a.createElement(ee,{style:e,key:n},re[n])}))),r.a.createElement(ne,{onClick:function(){m(!g)}},"Menu"))};function ie(){var e=Object(l.a)(["\n  width: 5px;\n  height: 5px;\n  border-radius: 5px;\n  background-color: white;\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  &:nth-child(1) {\n    left: 0\n  };\n  &:nth-child(2) {\n    left: 10px;\n  };\n  &:nth-child(3) {\n    left: 20px;\n  }\n"]);return ie=function(){return e},e}function ce(){var e=Object(l.a)(["\n  width: 35px;\n  height: 17px;\n  position: relative;\n  margin-left: 15px;\n  cursor: pointer;\n "]);return ce=function(){return e},e}function le(){var e=Object(l.a)(["\n  position: absolute;\n  z-index: 999;\n  top: 20px;\n  right: 20px;\n  color: white;\n  font-size: 15px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return le=function(){return e},e}function se(){var e=Object(l.a)(['\n  position: absolute;\n  z-index: 999;\n  top: 20px;\n  color: white;\n  left: 20px;\n  font-size: 50px;\n  font-family: "Anders";\n']);return se=function(){return e},e}var ue=s.b.div(se()),fe=s.b.div(le()),ve=s.b.div(ce()),ge=s.b.div(ie()),me=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null,"Horbatov"),!e.isNavMenuOpened&&r.a.createElement(fe,null,"Menu",r.a.createElement(ve,{onClick:function(){e.isNavMenuOpened||e.switchNavMenu()}},r.a.createElement(ge,null),r.a.createElement(ge,null),r.a.createElement(ge,null))),e.isNavMenuOpened&&r.a.createElement(ae,{switchNavMenu:e.switchNavMenu}))},de=s.b.div.withConfig({displayName:"test__ButtonsWrapper",componentId:"sc-1nbo16o-0"})(["position:absolute;top:200px;left:200px;z-index:1000;"]),pe=s.b.div.withConfig({displayName:"test__Button",componentId:"sc-1nbo16o-1"})(["width:50px;height:50px;background-color:",";"],(function(e){return e.$color})),xe=function(){var e=h((function(e){return e.setCurrentScene})),n=h((function(e){return e.setExploded}));return r.a.createElement(de,null,r.a.createElement(pe,{onClick:function(){e({currentScene:"explosion",previousScene:"landscape"})},$color:"red"}),r.a.createElement(pe,{onClick:function(){n(!0)},$color:"green"}))};function ye(){var e=Object(l.a)(["\n    width: 100vw;\n    height: 100vh;\n    position: absolute;\n    z-index: -1;\n"]);return ye=function(){return e},e}function he(){var e=Object(l.a)(["\n    * {\n      box-sizing: border-box;\n    };\n    body {\n      margin: 0;\n      padding: 0;\n      user-select: none;\n      outline: none;\n      \n    };\n   /* &::-webkit-scrollbar { \n    display: none;\n    };\n    html {\n    -ms-overflow-style: none; \n    scrollbar-width: none; \n    scrollbar-height: none; \n    }*/\n"]);return he=function(){return e},e}var be=Object(s.a)(he()),ze=s.b.div(ye()),we=function(){var e=Object(o.useState)(!1),n=Object(c.a)(e,2),t=n[0],a=n[1];return Object(o.useEffect)((function(){var e=function(e){w().mouseMove([e.clientX,e.clientY])};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement(ze,null,r.a.createElement(xe,null),r.a.createElement(k,null)),r.a.createElement(me,{switchNavMenu:function(){a(!t)},isNavMenuOpened:t}))};t(80);i.a.render(r.a.createElement(we,null),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.366cdec8.chunk.js.map